<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal - Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <div class="bg-blue-600 text-white p-4">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">üè´ ABC University Student Portal</h1>
            <div id="user-info" class="hidden">
                <span id="student-name" class="mr-4"></span>
                <button onclick="logout()" class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm">
                    <i class="fas fa-sign-out-alt mr-1"></i>Logout
                </button>
            </div>
        </div>
    </div>

    <!-- Login Section -->
    <div id="login-section" class="max-w-md mx-auto mt-20">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">Student Login</h2>
            
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2">Student ID</label>
                <input type="text" id="studentId" value="student123" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500">
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                <input type="password" id="password" value="password123" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500">
            </div>
            
            <button onclick="loginStudent()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                <i class="fas fa-sign-in-alt mr-2"></i>Login to Portal
            </button>
            
            <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded">
                <p class="text-sm text-yellow-800">
                    <i class="fas fa-info-circle mr-1"></i>
                    This simulates existing school portal login (username/password)
                </p>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard-section" class="hidden max-w-6xl mx-auto mt-8 p-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Student Info Card -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">
                    <i class="fas fa-user mr-2 text-blue-600"></i>Student Information
                </h3>
                <div id="student-details">
                    <p><strong>Name:</strong> <span id="display-name"></span></p>
                    <p><strong>Student ID:</strong> <span id="display-id"></span></p>
                    <p><strong>Program:</strong> <span id="display-program"></span></p>
                    <p><strong>Year Level:</strong> <span id="display-year"></span></p>
                    <p><strong>Section:</strong> <span id="display-section"></span></p>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">
                    <i class="fas fa-bolt mr-2 text-green-600"></i>Quick Actions
                </h3>
                <div class="space-y-3">
                    <button onclick="viewGrades()" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded text-left">
                        <i class="fas fa-chart-bar mr-2"></i>View My Grades
                    </button>
                    <button class="w-full bg-gray-400 text-white py-2 px-4 rounded text-left cursor-not-allowed">
                        <i class="fas fa-calendar mr-2"></i>Class Schedule
                    </button>
                    <button class="w-full bg-gray-400 text-white py-2 px-4 rounded text-left cursor-not-allowed">
                        <i class="fas fa-file-alt mr-2"></i>Transcript Request
                    </button>
                </div>
            </div>

            <!-- API Connection Status -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">
                    <i class="fas fa-link mr-2 text-purple-600"></i>System Status
                </h3>
                <div class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                        <span class="text-sm">Portal Online</span>
                    </div>
                    <div class="flex items-center">
                        <div id="api-status" class="w-3 h-3 bg-gray-400 rounded-full mr-2"></div>
                        <span class="text-sm" id="api-status-text">Grading API: Not Connected</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grades Section -->
        <div id="grades-section" class="hidden mt-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">
                        <i class="fas fa-graduation-cap mr-2 text-blue-600"></i>My Grades
                    </h3>
                    <div class="text-sm text-gray-600">
                        <i class="fas fa-sync-alt mr-1"></i>
                        Data from Grading System API
                    </div>
                </div>

                <!-- Loading State -->
                <div id="loading-grades" class="hidden text-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                    <p class="text-gray-600">Connecting to Grading System API...</p>
                    <p class="text-sm text-gray-500 mt-2">Requesting grades for student ID: <span id="loading-student-id"></span></p>
                </div>

                <!-- API Request Details -->
                <div id="api-request-details" class="hidden mb-6 p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-semibold text-gray-700 mb-2">
                        <i class="fas fa-code mr-2"></i>API Request Details:
                    </h4>
                    <div class="text-sm font-mono text-gray-600">
                        <div>GET <span id="api-url"></span></div>
                        <div>X-API-Key: <span class="text-blue-600">***api-key***</span></div>
                    </div>
                </div>

                <!-- Grades Table -->
                <div id="grades-table" class="hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full table-auto">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Subject Code</th>
                                    <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Subject Name</th>
                                    <th class="px-4 py-2 text-center text-sm font-semibold text-gray-700">Final Grade</th>
                                    <th class="px-4 py-2 text-center text-sm font-semibold text-gray-700">Status</th>
                                </tr>
                            </thead>
                            <tbody id="grades-tbody">
                                <!-- Grades will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Error State -->
                <div id="error-grades" class="hidden text-center py-8">
                    <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                    <p class="text-red-600 font-semibold">Failed to connect to Grading System API</p>
                    <p class="text-gray-600 text-sm mt-2">Please try again later or contact IT support</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Student data mapping (simulates portal's student database)
        const studentDatabase = {
            'student123': {
                name: 'Alexandra Marie Dela Cruz Santos',
                studentId: 'HRM2023-001',
                program: 'Bachelor of Science in Hotel & Restaurant Management',
                yearLevel: '1st Year',
                section: 'HRM-A'
            },
            'student456': {
                name: 'Juan Carlos Mendoza',
                studentId: '2024-001',
                program: 'Grade 4',
                yearLevel: 'Grade 4',
                section: 'Grade4-A'
            }
        };

        let currentStudent = null;
        let apiToken = null;

        function loginStudent() {
            const studentId = document.getElementById('studentId').value;
            const password = document.getElementById('password').value;

            // Simulate portal authentication
            if (studentDatabase[studentId] && password === 'password123') {
                currentStudent = studentDatabase[studentId];
                
                // Hide login, show dashboard
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('dashboard-section').classList.remove('hidden');
                
                // Update UI with student info
                document.getElementById('student-name').textContent = currentStudent.name;
                document.getElementById('display-name').textContent = currentStudent.name;
                document.getElementById('display-id').textContent = currentStudent.studentId;
                document.getElementById('display-program').textContent = currentStudent.program;
                document.getElementById('display-year').textContent = currentStudent.yearLevel;
                document.getElementById('display-section').textContent = currentStudent.section;
                document.getElementById('user-info').classList.remove('hidden');
                
                // Simulate getting API token (this would happen behind the scenes)
                setTimeout(() => {
                    apiToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
                    document.getElementById('api-status').className = 'w-3 h-3 bg-green-500 rounded-full mr-2';
                    document.getElementById('api-status-text').textContent = 'Grading API: Connected';
                }, 1000);
                
            } else {
                alert('Invalid credentials! Use student123/password123 or student456/password123');
            }
        }

        function viewGrades() {
            if (!apiToken) {
                alert('API connection not ready. Please wait...');
                return;
            }

            // Show grades section
            document.getElementById('grades-section').classList.remove('hidden');
            document.getElementById('loading-grades').classList.remove('hidden');
            document.getElementById('loading-student-id').textContent = currentStudent.studentId;
            
            // Show API request details
            document.getElementById('api-request-details').classList.remove('hidden');
            const apiUrl = `https://api.edumanage.ph/v1/students/${currentStudent.studentId}/grades?school_year_id=1&semester=1st&year_level=${encodeURIComponent(currentStudent.yearLevel)}&section=${currentStudent.section}`;
            document.getElementById('api-url').textContent = apiUrl;

            // Simulate API call delay
            setTimeout(() => {
                document.getElementById('loading-grades').classList.add('hidden');
                
                // Simulate successful API response
                const sampleGrades = {
                    'HRM2023-001': [
                        { code: 'HRM101', name: 'Introduction to Hospitality Industry', grade: 88.3, status: 'PASSED' },
                        { code: 'HRM102', name: 'Food Service Operations', grade: 92.1, status: 'PASSED' },
                        { code: 'HRM103', name: 'Front Office Operations', grade: 85.7, status: 'PASSED' },
                        { code: 'ENG101', name: 'English Communication', grade: 90.5, status: 'PASSED' }
                    ],
                    '2024-001': [
                        { code: 'SCI4', name: 'Science 4', grade: 95.0, status: 'PASSED' },
                        { code: 'MATH4', name: 'Mathematics 4', grade: 88.5, status: 'PASSED' },
                        { code: 'ENG4', name: 'English 4', grade: 92.3, status: 'PASSED' },
                        { code: 'FIL4', name: 'Filipino 4', grade: 89.7, status: 'PASSED' }
                    ]
                };

                const grades = sampleGrades[currentStudent.studentId] || [];
                const tbody = document.getElementById('grades-tbody');
                tbody.innerHTML = '';

                grades.forEach(grade => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-200 hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="px-4 py-3 text-sm font-medium text-gray-900">${grade.code}</td>
                        <td class="px-4 py-3 text-sm text-gray-700">${grade.name}</td>
                        <td class="px-4 py-3 text-sm text-center font-semibold ${grade.grade >= 75 ? 'text-green-600' : 'text-red-600'}">${grade.grade}</td>
                        <td class="px-4 py-3 text-center">
                            <span class="px-2 py-1 text-xs font-semibold rounded-full ${grade.status === 'PASSED' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                ${grade.status}
                            </span>
                        </td>
                    `;
                    tbody.appendChild(row);
                });

                document.getElementById('grades-table').classList.remove('hidden');
            }, 2000);
        }

        function logout() {
            currentStudent = null;
            apiToken = null;
            document.getElementById('login-section').classList.remove('hidden');
            document.getElementById('dashboard-section').classList.add('hidden');
            document.getElementById('grades-section').classList.add('hidden');
            document.getElementById('user-info').classList.add('hidden');
            document.getElementById('api-status').className = 'w-3 h-3 bg-gray-400 rounded-full mr-2';
            document.getElementById('api-status-text').textContent = 'Grading API: Not Connected';
        }
    </script>
</body>
</html>